import{_ as v,c as r,a as l,b as u,F as y,r as h,t as c,d as f,e as _,w as b,f as I,o as i,n as x,g as k}from"./index-BO8bCumz.js";const w={name:"GalleryView",data(){return{galleryItems:[],loading:!1,error:null,selectedPeriod:"all",selectedImage:null,periods:[{value:"all",label:"Todos os Períodos"},{value:"2024",label:"2024"},{value:"2023",label:"2023"},{value:"2022",label:"2022"},{value:"recent",label:"Últimos 30 dias"}],heights:["250px","300px","350px","400px","450px","280px","320px","380px"]}},computed:{filteredGalleryItems(){if(this.selectedPeriod==="all")return this.galleryItems;if(this.selectedPeriod==="recent"){const t=new Date;return t.setDate(t.getDate()-30),this.galleryItems.filter(e=>new Date(e.date)>=t)}return this.galleryItems.filter(t=>new Date(t.date).getFullYear().toString()===this.selectedPeriod)}},async mounted(){await this.loadGalleryItems()},watch:{selectedPeriod(){}},methods:{async loadGalleryItems(){this.loading=!0,this.error=null;try{const t=await I.get("/galeria?_embed");console.log("RESPOSTA COMPLETA DA API:",t),console.log("DADOS DA RESPOSTA (response.data):",t[0].gallery_data);const e=t||[];this.galleryItems=e.flatMap(d=>!d.gallery_data||!Array.isArray(d.gallery_data)?[]:d.gallery_data.map(n=>({id:n.id,title:d.title.rendered,date:d.date,image:{url:n.url_full,large:n.url_large,medium:n.url_medium},alt:n.alt,caption:n.caption})))}catch(t){this.error="Erro ao carregar a galeria. Tente novamente mais tarde.",console.error("Gallery loading error:",t)}finally{this.loading=!1}},getRandomHeight(){return this.heights[Math.floor(Math.random()*this.heights.length)]},formatDate(t){return t?new Date(t).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"}):"Data não disponível"},openModal(t){this.selectedImage=t,document.body.style.overflow="hidden"},closeModal(){this.selectedImage=null,document.body.style.overflow="auto"},onImageLoad(t){t.target.style.opacity="1"},onImageError(t){t.target.style.display="none";const e=t.target.nextElementSibling;e&&(e.style.display="flex")}}},D={class:"gallery-page"},C={class:"container"},A={class:"row justify-content-center mb-5"},M={class:"col-lg-8"},P={class:"filter-container"},E=["onClick"],S={key:0,class:"text-center mb-5"},G={key:1,class:"text-center mb-5"},L={class:"error-message"},N={class:"mt-3"},R={key:2,class:"masonry-gallery"},O=["onClick"],T=["src","alt"],V={key:1,class:"image-placeholder"},B={class:"image-overlay"},z={class:"image-info"},F={key:3,class:"text-center"},j={class:"modal-info"};function H(t,e,d,n,o,a){const p=_("AuthenticatedImage");return i(),r("main",D,[l("div",C,[e[9]||(e[9]=l("div",{class:"row justify-content-center text-center mb-5"},[l("div",{class:"col-lg-8"},[l("h1",{class:"page-title"},"Confira os Registros das Nossas Oficinas!"),l("p",{class:"page-subtitle"}," Explore os momentos especiais capturados durante nossas oficinas e eventos. Cada imagem conta uma história de aprendizado e transformação. ")])],-1)),l("div",A,[l("div",M,[l("div",P,[(i(!0),r(y,null,h(o.periods,s=>(i(),r("button",{key:s.value,onClick:g=>o.selectedPeriod=s.value,class:x(["btn","filter-btn",{active:o.selectedPeriod===s.value}])},c(s.label),11,E))),128))])])]),o.loading?(i(),r("div",S,e[5]||(e[5]=[l("div",{class:"loading-spinner"},[l("i",{class:"bi bi-arrow-clockwise spin"}),l("p",{class:"mt-3"},"Carregando galeria...")],-1)]))):o.error?(i(),r("div",G,[l("div",L,[e[6]||(e[6]=l("i",{class:"bi bi-exclamation-triangle"},null,-1)),l("p",N,c(o.error),1)])])):(i(),r("div",R,[(i(!0),r(y,null,h(a.filteredGalleryItems,(s,g)=>(i(),r("div",{key:s.id||g,class:"gallery-item",onClick:m=>a.openModal(s)},[l("div",{class:"image-card",style:k({height:a.getRandomHeight()})},[s.image?(i(),r("img",{key:0,src:s.image.url,alt:s.title||"Imagem da galeria",onLoad:e[0]||(e[0]=(...m)=>a.onImageLoad&&a.onImageLoad(...m)),onError:e[1]||(e[1]=(...m)=>a.onImageError&&a.onImageError(...m))},null,40,T)):(i(),r("div",V,e[7]||(e[7]=[l("i",{class:"bi bi-image"},null,-1)]))),l("div",B,[l("div",z,[l("h6",null,c(s.title||"Sem título"),1),l("p",null,c(a.formatDate(s.date)),1)])])],4)],8,O))),128))])),!o.loading&&!o.error&&a.filteredGalleryItems.length===0?(i(),r("div",F,e[8]||(e[8]=[l("div",{class:"empty-state"},[l("i",{class:"bi bi-images"}),l("h5",{class:"mt-3"},"Nenhuma imagem encontrada"),l("p",null,"Não há imagens disponíveis para o período selecionado.")],-1)]))):u("",!0)]),o.selectedImage?(i(),r("div",{key:0,class:"image-modal",onClick:e[4]||(e[4]=(...s)=>a.closeModal&&a.closeModal(...s))},[l("div",{class:"modal-content",onClick:e[3]||(e[3]=b(()=>{},["stop"]))},[l("button",{class:"modal-close",onClick:e[2]||(e[2]=(...s)=>a.closeModal&&a.closeModal(...s))},e[10]||(e[10]=[l("i",{class:"bi bi-x-lg"},null,-1)])),f(p,{src:o.selectedImage.image?.url,alt:o.selectedImage.title},null,8,["src","alt"]),l("div",j,[l("h5",null,c(o.selectedImage.title),1),l("p",null,c(a.formatDate(o.selectedImage.date)),1)])])])):u("",!0)])}const q=v(w,[["render",H],["__scopeId","data-v-7e783a12"]]);export{q as default};
