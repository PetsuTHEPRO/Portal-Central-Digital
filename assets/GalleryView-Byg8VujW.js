import{_ as p,A as f,c as i,a as e,b as u,F as y,r as h,t as c,d as v,e as _,w as b,f as I,o as r,n as k,g as x,h as w}from"./index-DUb6VSqf.js";const D={name:"GalleryView",components:{AuthenticatedImage:f},data(){return{galleryItems:[],loading:!1,error:null,selectedPeriod:"all",selectedImage:null,periods:[{value:"all",label:"Todos os Períodos"},{value:"2024",label:"2024"},{value:"2023",label:"2023"},{value:"2022",label:"2022"},{value:"recent",label:"Últimos 30 dias"}],heights:["250px","300px","350px","400px","450px","280px","320px","380px"]}},computed:{filteredGalleryItems(){if(this.selectedPeriod==="all")return this.galleryItems;if(this.selectedPeriod==="recent"){const l=new Date;return l.setDate(l.getDate()-30),this.galleryItems.filter(t=>new Date(t.date)>=l)}return this.galleryItems.filter(l=>new Date(l.date).getFullYear().toString()===this.selectedPeriod)}},async mounted(){await this.loadGalleryItems()},watch:{selectedPeriod(){}},methods:{async loadGalleryItems(){this.loading=!0,this.error=null;try{const l=await I.get("/galeria?_embed");console.log("RESPOSTA COMPLETA DA API:",l),console.log("DADOS DA RESPOSTA (response.data):",l[0].gallery_data);const t=l||[];this.galleryItems=t.flatMap(d=>!d.gallery_data||!Array.isArray(d.gallery_data)?[]:d.gallery_data.map(n=>({id:n.id,title:d.title.rendered,date:d.date,image:{url:n.url_full,large:n.url_large,medium:n.url_medium},alt:n.alt,caption:n.caption})))}catch(l){this.error="Erro ao carregar a galeria. Tente novamente mais tarde.",console.error("Gallery loading error:",l)}finally{this.loading=!1}},getRandomHeight(){return this.heights[Math.floor(Math.random()*this.heights.length)]},formatDate(l){return l?new Date(l).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"}):"Data não disponível"},openModal(l){this.selectedImage=l,document.body.style.overflow="hidden"},closeModal(){this.selectedImage=null,document.body.style.overflow="auto"},onImageLoad(l){l.target.style.opacity="1"},onImageError(l){l.target.style.display="none";const t=l.target.nextElementSibling;t&&(t.style.display="flex")}}},A={class:"gallery-page"},C={class:"container"},M={class:"row justify-content-center mb-5"},P={class:"col-lg-8"},E={class:"filter-container"},S=["onClick"],G={key:0,class:"text-center mb-5"},L={key:1,class:"text-center mb-5"},N={class:"error-message"},R={class:"mt-3"},B={key:2,class:"masonry-gallery"},O=["onClick"],T={key:1,class:"image-placeholder"},V={class:"image-overlay"},z={class:"image-info"},F={key:3,class:"text-center"},j={class:"modal-info"};function H(l,t,d,n,s,o){const m=_("AuthenticatedImage");return r(),i("main",A,[e("div",C,[t[7]||(t[7]=e("div",{class:"row justify-content-center text-center mb-5"},[e("div",{class:"col-lg-8"},[e("h1",{class:"page-title"},"Confira os Registros das Nossas Oficinas!"),e("p",{class:"page-subtitle"}," Explore os momentos especiais capturados durante nossas oficinas e eventos. Cada imagem conta uma história de aprendizado e transformação. ")])],-1)),e("div",M,[e("div",P,[e("div",E,[(r(!0),i(y,null,h(s.periods,a=>(r(),i("button",{key:a.value,onClick:g=>s.selectedPeriod=a.value,class:k(["btn","filter-btn",{active:s.selectedPeriod===a.value}])},c(a.label),11,S))),128))])])]),s.loading?(r(),i("div",G,t[3]||(t[3]=[e("div",{class:"loading-spinner"},[e("i",{class:"bi bi-arrow-clockwise spin"}),e("p",{class:"mt-3"},"Carregando galeria...")],-1)]))):s.error?(r(),i("div",L,[e("div",N,[t[4]||(t[4]=e("i",{class:"bi bi-exclamation-triangle"},null,-1)),e("p",R,c(s.error),1)])])):(r(),i("div",B,[(r(!0),i(y,null,h(o.filteredGalleryItems,(a,g)=>(r(),i("div",{key:a.id||g,class:"gallery-item",onClick:Y=>o.openModal(a)},[e("div",{class:"image-card",style:x({height:o.getRandomHeight()})},[a.image?(r(),w(m,{key:0,src:a.image.url,class:"image",alt:a.title||"Imagem da galeria",onLoad:o.onImageLoad,onError:o.onImageError},null,8,["src","alt","onLoad","onError"])):(r(),i("div",T,t[5]||(t[5]=[e("i",{class:"bi bi-image"},null,-1)]))),e("div",V,[e("div",z,[e("h6",null,c(a.title||"Sem título"),1),e("p",null,c(o.formatDate(a.date)),1)])])],4)],8,O))),128))])),!s.loading&&!s.error&&o.filteredGalleryItems.length===0?(r(),i("div",F,t[6]||(t[6]=[e("div",{class:"empty-state"},[e("i",{class:"bi bi-images"}),e("h5",{class:"mt-3"},"Nenhuma imagem encontrada"),e("p",null,"Não há imagens disponíveis para o período selecionado.")],-1)]))):u("",!0)]),s.selectedImage?(r(),i("div",{key:0,class:"image-modal",onClick:t[2]||(t[2]=(...a)=>o.closeModal&&o.closeModal(...a))},[e("div",{class:"modal-content",onClick:t[1]||(t[1]=b(()=>{},["stop"]))},[e("button",{class:"modal-close",onClick:t[0]||(t[0]=(...a)=>o.closeModal&&o.closeModal(...a))},t[8]||(t[8]=[e("i",{class:"bi bi-x-lg"},null,-1)])),v(m,{src:s.selectedImage.image?.url,alt:s.selectedImage.title},null,8,["src","alt"]),e("div",j,[e("h5",null,c(s.selectedImage.title),1),e("p",null,c(o.formatDate(s.selectedImage.date)),1)])])])):u("",!0)])}const J=p(D,[["render",H],["__scopeId","data-v-a1beeef7"]]);export{J as default};
