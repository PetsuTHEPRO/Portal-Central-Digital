import{_ as y,c as r,a as e,b as m,F as g,r as u,t as n,w as h,d as v,o as i,n as f,e as p}from"./index-CSzWSsLj.js";const b={name:"GalleryView",data(){return{galleryItems:[],loading:!1,error:null,selectedPeriod:"all",selectedImage:null,periods:[{value:"all",label:"Todos os Períodos"},{value:"2024",label:"2024"},{value:"2023",label:"2023"},{value:"2022",label:"2022"},{value:"recent",label:"Últimos 30 dias"}],heights:["250px","300px","350px","400px","450px","280px","320px","380px"]}},computed:{filteredGalleryItems(){if(this.selectedPeriod==="all")return this.galleryItems;if(this.selectedPeriod==="recent"){const t=new Date;return t.setDate(t.getDate()-30),this.galleryItems.filter(l=>new Date(l.date)>=t)}return this.galleryItems.filter(t=>new Date(t.date).getFullYear().toString()===this.selectedPeriod)}},async mounted(){await this.loadGalleryItems()},watch:{selectedPeriod(){}},methods:{async loadGalleryItems(){this.loading=!0,this.error=null;try{const t=await v.getWithPopulate("/gallery-items",["image"]);this.galleryItems=t.data||[]}catch(t){this.error="Erro ao carregar a galeria. Tente novamente mais tarde.",console.error("Gallery loading error:",t)}finally{this.loading=!1}},getRandomHeight(){return this.heights[Math.floor(Math.random()*this.heights.length)]},formatDate(t){return t?new Date(t).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"}):"Data não disponível"},openModal(t){this.selectedImage=t,document.body.style.overflow="hidden"},closeModal(){this.selectedImage=null,document.body.style.overflow="auto"},onImageLoad(t){t.target.style.opacity="1"},onImageError(t){t.target.style.display="none";const l=t.target.nextElementSibling;l&&(l.style.display="flex")}}},_={class:"gallery-page"},I={class:"container"},x={class:"row justify-content-center mb-5"},k={class:"col-lg-8"},w={class:"filter-container"},D=["onClick"],C={key:0,class:"text-center mb-5"},M={key:1,class:"text-center mb-5"},P={class:"error-message"},E={class:"mt-3"},G={key:2,class:"masonry-gallery"},L=["onClick"],S=["src","alt"],N={key:1,class:"image-placeholder"},B={class:"image-overlay"},R={class:"image-info"},V={key:3,class:"text-center"},z=["src","alt"],F={class:"modal-info"};function j(t,l,H,T,o,a){return i(),r("main",_,[e("div",I,[l[9]||(l[9]=e("div",{class:"row justify-content-center text-center mb-5"},[e("div",{class:"col-lg-8"},[e("h1",{class:"page-title"},"Confira os Registros das Nossas Oficinas!"),e("p",{class:"page-subtitle"}," Explore os momentos especiais capturados durante nossas oficinas e eventos. Cada imagem conta uma história de aprendizado e transformação. ")])],-1)),e("div",x,[e("div",k,[e("div",w,[(i(!0),r(g,null,u(o.periods,s=>(i(),r("button",{key:s.value,onClick:c=>o.selectedPeriod=s.value,class:f(["btn","filter-btn",{active:o.selectedPeriod===s.value}])},n(s.label),11,D))),128))])])]),o.loading?(i(),r("div",C,l[5]||(l[5]=[e("div",{class:"loading-spinner"},[e("i",{class:"bi bi-arrow-clockwise spin"}),e("p",{class:"mt-3"},"Carregando galeria...")],-1)]))):o.error?(i(),r("div",M,[e("div",P,[l[6]||(l[6]=e("i",{class:"bi bi-exclamation-triangle"},null,-1)),e("p",E,n(o.error),1)])])):(i(),r("div",G,[(i(!0),r(g,null,u(a.filteredGalleryItems,(s,c)=>(i(),r("div",{key:s.id||c,class:"gallery-item",onClick:d=>a.openModal(s)},[e("div",{class:"image-card",style:p({height:a.getRandomHeight()})},[s.image?(i(),r("img",{key:0,src:s.image.url,alt:s.title||"Imagem da galeria",onLoad:l[0]||(l[0]=(...d)=>a.onImageLoad&&a.onImageLoad(...d)),onError:l[1]||(l[1]=(...d)=>a.onImageError&&a.onImageError(...d))},null,40,S)):(i(),r("div",N,l[7]||(l[7]=[e("i",{class:"bi bi-image"},null,-1)]))),e("div",B,[e("div",R,[e("h6",null,n(s.title||"Sem título"),1),e("p",null,n(a.formatDate(s.date)),1)])])],4)],8,L))),128))])),!o.loading&&!o.error&&a.filteredGalleryItems.length===0?(i(),r("div",V,l[8]||(l[8]=[e("div",{class:"empty-state"},[e("i",{class:"bi bi-images"}),e("h5",{class:"mt-3"},"Nenhuma imagem encontrada"),e("p",null,"Não há imagens disponíveis para o período selecionado.")],-1)]))):m("",!0)]),o.selectedImage?(i(),r("div",{key:0,class:"image-modal",onClick:l[4]||(l[4]=(...s)=>a.closeModal&&a.closeModal(...s))},[e("div",{class:"modal-content",onClick:l[3]||(l[3]=h(()=>{},["stop"]))},[e("button",{class:"modal-close",onClick:l[2]||(l[2]=(...s)=>a.closeModal&&a.closeModal(...s))},l[10]||(l[10]=[e("i",{class:"bi bi-x-lg"},null,-1)])),e("img",{src:o.selectedImage.image?.url,alt:o.selectedImage.title},null,8,z),e("div",F,[e("h5",null,n(o.selectedImage.title),1),e("p",null,n(a.formatDate(o.selectedImage.date)),1)])])])):m("",!0)])}const O=y(b,[["render",j],["__scopeId","data-v-ff4169b9"]]);export{O as default};
