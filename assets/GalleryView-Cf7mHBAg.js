import{_ as f,c as o,a as e,b as u,F as y,r as h,t as c,w as p,d as v,o as i,n as _,e as b}from"./index-DYzO7LRE.js";const I={name:"GalleryView",data(){return{galleryItems:[],loading:!1,error:null,selectedPeriod:"all",selectedImage:null,periods:[{value:"all",label:"Todos os Períodos"},{value:"2024",label:"2024"},{value:"2023",label:"2023"},{value:"2022",label:"2022"},{value:"recent",label:"Últimos 30 dias"}],heights:["250px","300px","350px","400px","450px","280px","320px","380px"]}},computed:{filteredGalleryItems(){if(this.selectedPeriod==="all")return this.galleryItems;if(this.selectedPeriod==="recent"){const t=new Date;return t.setDate(t.getDate()-30),this.galleryItems.filter(l=>new Date(l.date)>=t)}return this.galleryItems.filter(t=>new Date(t.date).getFullYear().toString()===this.selectedPeriod)}},async mounted(){await this.loadGalleryItems()},watch:{selectedPeriod(){}},methods:{async loadGalleryItems(){this.loading=!0,this.error=null;try{const t=await v.get("/galeria?_embed");console.log("RESPOSTA COMPLETA DA API:",t),console.log("DADOS DA RESPOSTA (response.data):",t[0].gallery_data);const l=t||[];this.galleryItems=l.flatMap(d=>!d.gallery_data||!Array.isArray(d.gallery_data)?[]:d.gallery_data.map(n=>({id:n.id,title:d.title.rendered,date:d.date,image:{url:n.url_full,large:n.url_large,medium:n.url_medium},alt:n.alt,caption:n.caption})))}catch(t){this.error="Erro ao carregar a galeria. Tente novamente mais tarde.",console.error("Gallery loading error:",t)}finally{this.loading=!1}},getRandomHeight(){return this.heights[Math.floor(Math.random()*this.heights.length)]},formatDate(t){return t?new Date(t).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"}):"Data não disponível"},openModal(t){this.selectedImage=t,document.body.style.overflow="hidden"},closeModal(){this.selectedImage=null,document.body.style.overflow="auto"},onImageLoad(t){t.target.style.opacity="1"},onImageError(t){t.target.style.display="none";const l=t.target.nextElementSibling;l&&(l.style.display="flex")}}},x={class:"gallery-page"},k={class:"container"},w={class:"row justify-content-center mb-5"},D={class:"col-lg-8"},C={class:"filter-container"},M=["onClick"],P={key:0,class:"text-center mb-5"},E={key:1,class:"text-center mb-5"},S={class:"error-message"},A={class:"mt-3"},G={key:2,class:"masonry-gallery"},L=["onClick"],R=["src","alt"],N={key:1,class:"image-placeholder"},O={class:"image-overlay"},T={class:"image-info"},B={key:3,class:"text-center"},V=["src","alt"],z={class:"modal-info"};function F(t,l,d,n,r,a){return i(),o("main",x,[e("div",k,[l[9]||(l[9]=e("div",{class:"row justify-content-center text-center mb-5"},[e("div",{class:"col-lg-8"},[e("h1",{class:"page-title"},"Confira os Registros das Nossas Oficinas!"),e("p",{class:"page-subtitle"}," Explore os momentos especiais capturados durante nossas oficinas e eventos. Cada imagem conta uma história de aprendizado e transformação. ")])],-1)),e("div",w,[e("div",D,[e("div",C,[(i(!0),o(y,null,h(r.periods,s=>(i(),o("button",{key:s.value,onClick:g=>r.selectedPeriod=s.value,class:_(["btn","filter-btn",{active:r.selectedPeriod===s.value}])},c(s.label),11,M))),128))])])]),r.loading?(i(),o("div",P,l[5]||(l[5]=[e("div",{class:"loading-spinner"},[e("i",{class:"bi bi-arrow-clockwise spin"}),e("p",{class:"mt-3"},"Carregando galeria...")],-1)]))):r.error?(i(),o("div",E,[e("div",S,[l[6]||(l[6]=e("i",{class:"bi bi-exclamation-triangle"},null,-1)),e("p",A,c(r.error),1)])])):(i(),o("div",G,[(i(!0),o(y,null,h(a.filteredGalleryItems,(s,g)=>(i(),o("div",{key:s.id||g,class:"gallery-item",onClick:m=>a.openModal(s)},[e("div",{class:"image-card",style:b({height:a.getRandomHeight()})},[s.image?(i(),o("img",{key:0,src:s.image.url,alt:s.title||"Imagem da galeria",onLoad:l[0]||(l[0]=(...m)=>a.onImageLoad&&a.onImageLoad(...m)),onError:l[1]||(l[1]=(...m)=>a.onImageError&&a.onImageError(...m))},null,40,R)):(i(),o("div",N,l[7]||(l[7]=[e("i",{class:"bi bi-image"},null,-1)]))),e("div",O,[e("div",T,[e("h6",null,c(s.title||"Sem título"),1),e("p",null,c(a.formatDate(s.date)),1)])])],4)],8,L))),128))])),!r.loading&&!r.error&&a.filteredGalleryItems.length===0?(i(),o("div",B,l[8]||(l[8]=[e("div",{class:"empty-state"},[e("i",{class:"bi bi-images"}),e("h5",{class:"mt-3"},"Nenhuma imagem encontrada"),e("p",null,"Não há imagens disponíveis para o período selecionado.")],-1)]))):u("",!0)]),r.selectedImage?(i(),o("div",{key:0,class:"image-modal",onClick:l[4]||(l[4]=(...s)=>a.closeModal&&a.closeModal(...s))},[e("div",{class:"modal-content",onClick:l[3]||(l[3]=p(()=>{},["stop"]))},[e("button",{class:"modal-close",onClick:l[2]||(l[2]=(...s)=>a.closeModal&&a.closeModal(...s))},l[10]||(l[10]=[e("i",{class:"bi bi-x-lg"},null,-1)])),e("img",{src:r.selectedImage.image?.url,alt:r.selectedImage.title},null,8,V),e("div",z,[e("h5",null,c(r.selectedImage.title),1),e("p",null,c(a.formatDate(r.selectedImage.date)),1)])])])):u("",!0)])}const H=f(I,[["render",F],["__scopeId","data-v-f4520932"]]);export{H as default};
